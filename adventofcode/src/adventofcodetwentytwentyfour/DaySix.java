package adventofcodetwentytwentyfour;
import utils.Util;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.HashMap;

public class DaySix {

	public static void main(String[] args) {
		String input = 
				  "....#.....#......#...............................#...........#.......#.....#................#...#....#....#................#..#.#."
				+ "...................................................................................#...........#............#....................."
				+ "..........#..............#.................................................#..............#......................................."
				+ "....................#...............#...#.....................#..............................#....#.............................#."
				+ "...............................##...............................................................#............#...................."
				+ "................#...........#................#...............#....#.......#.............................#..........#...........#.."
				+ "...........................#................................................#.##..................#.............#........#........"
				+ "......#......#.....#..........#.......................#..........#.............#.....................#........#....#.............."
				+ "..................................................#..................................#....#.........#...........#..............#.."
				+ "..................................#..................#..........................................#.........#....................#.."
				+ "#.................#....................#...........#....................................#......................#.................."
				+ ".......#..........................................................................................................#..............."
				+ "...............##.............................#...#.....................#..........................#.......................#......"
				+ "...#.......................................................#..........................................#...................#..#...."
				+ ".......#...#.......#.#.............#.....#.##.........................#..........................................................."
				+ "#................#.........#.......................##............................................#...#.....#........#.......#....."
				+ "#......##..............................................................#......#....#....#....#.#...............#............#..#.."
				+ ".....#...............................##.......................................#.......#......#............................#.....#."
				+ ".........#......#...............................#.....#.....#...................##......#........................................."
				+ ".#.................................................#...............#........#............................#........................"
				+ "#.........#.........................................#.......................#..............#......................#...........#..."
				+ "..........................................##.............................................................##..#.......#............"
				+ "...#.........................#...........................................#........#..............................................."
				+ "#..................#............#.................................................................#.#....................#....#..#"
				+ "...................#.....................................#.#.........#.............#......#............................##........."
				+ "....#..............................................................##.......................................................#....#"
				+ ".....................#.....#.............................................#.......................#..................#............."
				+ "...........#.......................................#................#.........#...............#.#...........#.....#.....#........#"
				+ ".#..#.................#....#...............................#.................................................##..................."
				+ "..#.....#......#..........#...................#..#..................................................#.......#...#................."
				+ ".............................................................#.......................#..........#.....#...................#......."
				+ ".......#.......................#.#....#...#.....##.......................#.................................................#......"
				+ ".................#.....................#...............................................................#..#......................."
				+ "...#.................#.#..................................................##......................................#..#............"
				+ "#........................................................#...#.........#................#.#......................................."
				+ ".................#........#.#........................#.#..................................#......................................."
				+ "..........#..#......#..................#.........................#................................#..............................."
				+ ".............................................................................................#...................................."
				+ ".....................#...........#........##.....#.........................#..............................#.....#....#............"
				+ "..#........#.........#.....................................................#......................................................"
				+ "...................................#...................#............#.............#...........................#..................."
				+ "....#.........................................................#................................#......#...#..#...................."
				+ "................................................................................#..#.......#..........................#....#......"
				+ "#...........................................................................#........................#............................"
				+ "..#..............#..........#...#..........................................................#......................................"
				+ ".......................................................#.................#.#....#.................#..........#....#..............."
				+ ".................................................................................................................................."
				+ ".................#.........................................................#..........#.........#.........#.................#....."
				+ "....................#........#...................#................#...#....................#..............#................#......"
				+ "...#.............##........................................#.........#.................#...........#.........#...................."
				+ "................#............#...........#...............#.....................................#...........................#......"
				+ "....................................................#...........#..............................#..........#...........#..........."
				+ ".........#..............#................................#.............#......................................#.........#...#....."
				+ "..#..#.........................................#.............................#...................................................."
				+ ".#............................##...#..........#............#..#.........................#......................#...#.............."
				+ "........#.....#..............#..................................................#...#......................#....#..............#.."
				+ "...............................................#.........#..................#............#.............................#.........."
				+ "..................................................................................................#....#.........................."
				+ "..............#..............................................................#...................................................."
				+ ".....#....#.....................#......................#...........#...#..#.............#.......................#................."
				+ ".............................#...#..#...........................#............................................................#...."
				+ ".............................................#...............................#...................................................#"
				+ "..................................................................#......#....#.......................#.......#........#.........."
				+ "..................#.#.........................................................................................##.......#........#."
				+ ".............................#.......................#.......................................##..................................."
				+ ".....#.............................................................................................................#.#............"
				+ "...............##.........#..#.....#...............#....................#.................................#.#....#................"
				+ "................#......................................................................#...............#...................#......"
				+ ".................#..............#................................................................................................."
				+ "............#...#...........................................................................................#......#.............."
				+ "..#.....................................................................#.....#.#.#......#....#..........#........................"
				+ ".#........#.............................#.....................#.....................#....#........................................"
				+ ".......................................................................................................#.........................."
				+ "...#........#..................................................#.........................................................#......#."
				+ ".......#.......#..#.................................................................................................#............."
				+ "..............................#..#..........................#..#..................#.............#................................."
				+ "..................#...#.............................................#...................#.......#...............#................."
				+ "...#.......#........#.....................................#...........#.................................................#........."
				+ ".#.............#....................................#........................................................##............#...#.."
				+ "...............#.....#....................................................................................#....#................#."
				+ "....#...........................................................#.....#..............................................#............"
				+ ".........#..........#...........................#.......................................#....#....................#..............."
				+ "...............................................................#..........#......^...............................................#"
				+ "#..........................#.....................#..............................#..............................#.................."
				+ "...................#.....#......#...........#........#............#.......#.......#..............................................."
				+ ".....#.....#.............................................................#..............#........#..........................#....#"
				+ "............#...............................................................#.............#......................#................"
				+ ".....#...............................................##........................................#.......#......#..................."
				+ ".........................................#........................................................................................"
				+ "..........................#...............................#............#............................#.....#......................."
				+ "...##.........#......#.....#...............................................................#........#............................."
				+ "......#...............#.#......................#.......#..............................#...#.........#.........#..#.........#......"
				+ "....#......#....#........#.#.............................#......................................................#.....#..........."
				+ ".....#.............#.....................#...#...............#...................................................................."
				+ "......#............#............#.#............#....................#............................................................."
				+ ".............#..................................................#....................#.............#.......#.............#........"
				+ ".............................................#......................................................................#............."
				+ "...............................#............................................................#................#...................#"
				+ "............#.....#....................................................................................................#.#........"
				+ ".........................#....................#...##.......#............#..#.................................#......#............."
				+ "....#......................#.....................#...........#.........................................#......#.#................."
				+ "..................................................................#..........................#......................#............."
				+ ".......................#......#..............................................................................#...................."
				+ ".......#.................#...............................##...............................................#.............#........."
				+ ".#..............#.....................................................................................................#..........."
				+ ".......##.................#................#.#...#......................................#...............#...#....................."
				+ ".............##......................................................#....................................#..........#............"
				+ "....................................#............#............#............#.....................................#................"
				+ "................#..#............................#..............................................#.....#...................#......#."
				+ "....................#....#......#..................#................#............................................................."
				+ "...............##...............#...#..........................#......#...............#..#................#.....#.............#..."
				+ "...........#..........#..........#..#.........#....#...#......#..............#................#....#..#..........................."
				+ "#.....................#..#...................................#...#..............................#......#.#.#......................"
				+ "............##...................#..#............................................................................................."
				+ "..............................................#.#.......................#.................#....#..................#.......#......."
				+ "....#................#......#........................................................#........#..............#...................."
				+ ".........#.#...............#............................###...........#..........................................................."
				+ ".........#.................................................................................#......#...#..............#......#....."
				+ "....#....#......#.#.........#..........#...............#.........#............##.............#..#............................#...."
				+ "....#..#...#.....#...........................#.#.......................................#...#.....................#............#..#"
				+ "...........#............................#........#...#......#...............................................#...#................."
				+ "..#...............................................................#..............................................#.........#......"
				+ "...................#.....................................#....................................#.#.#............#............#....."
				+ ".....#.................#...........................##.................#..#........................................................"
				+ "...#.......#...................................#.............................#...........#......##.#...#.........#.#...........#.."
				+ ".#.............#......#..#...#......................................................#..............#.............#.#.............."
				+ ".......................#............#...................#.....................#.......................#.............#..#......#..."
				+ "......................#..#.#.......#........#....#.............#.........#..............................#.#..........#........#..."
				+ ".................#.............#..#..........#...#.........#..................................#..#.............#................#."
				+ ".#..................................#....#...........................................#..............................#...#.........";
		
		String temp = "....#.....#......#...............................#...........#.......#.....#................#...#....#....#................#..#.#.";
		int len = temp.length();
		String key = "";
		HashMap<String, String> str = new HashMap<String, String>();
		for(int i =0; i < len; i++) {
			for(int j=0;j<len;j++) {
				str.put(j+","+i,""+input.charAt(i*len+j));
				if(input.charAt(i*len+j) == '^') {
					key = j+","+i;
					System.out.println(key);
				}
			}
		}
		
		ArrayList<String> positions = new ArrayList<String>();
		int lastNew = 0;
		int loops = 0;
		for(int i = 0; i < len; i++) {
			for(int j = 0; j < len; j++) {
				String tempStr = str.get(j+","+i);
				if(tempStr.equals("^")) {
					System.out.println(tempStr);

					continue;
				}
				str.put(j+","+i, "#");
				while(lastNew < len*len) {
					if(lastNew > (len*len-10)) {
						loops++;
						break;
					}
					String currPos = key;
					String currChar = str.get(key);
					
					int[] pos = Util.Strings.strToIntarr(currPos);
					try {
					
						if(currChar.equals("^")) {
							pos[1]--;
							if(str.get(pos[0]+","+pos[1]).equals("#")) {
								str.put(key, ">");
							}
							else {
								str.put(key, ".");
								str.put(pos[0]+","+pos[1], currChar);
								key = pos[0]+","+pos[1];
							}
						}
						if(currChar.equals(">")) {
							pos[0]++;
							if(str.get(pos[0]+","+pos[1]).equals("#")) {
								str.put(key, "d");
							}
							else {
								str.put(key, ".");
								str.put(pos[0]+","+pos[1], currChar);
								key = pos[0]+","+pos[1];
							}
						}
						if(currChar.equals("d")) {
							pos[1]++;
							if(str.get(pos[0]+","+pos[1]).equals("#")) {
								str.put(key, "<");
							}
							else {
								str.put(key, ".");
								str.put(pos[0]+","+pos[1], currChar);
								key = pos[0]+","+pos[1];
							}
						}
						if(currChar.equals("<")) {
							pos[0]--;
							if(str.get(pos[0]+","+pos[1]).equals("#")) {
								str.put(key, "^");
							}
							else {
								str.put(key, ".");
								str.put(pos[0]+","+pos[1], currChar);
								key = pos[0]+","+pos[1];
							}
						}
						if(positions.contains(key) != true) {
							positions.add(key);
						}
						else {
							lastNew++;
						}
					}
					catch (Exception e) {
						//System.out.print(positions.size()+1);
						break;// TODO: handle exception
					}
			//System.out.println(positions.size());
				}
				lastNew=0;
				str.put(j+","+i, tempStr);
				str.put(key, ".");
				key = "81,82";
				str.put(key, "^");
			}
			System.out.print("\n"+loops+" "+(i*len));
		}
		System.out.print("\n"+loops);

	}
}
